<!DOCTYPE html>
<html>
<head>
  <title>Simple To-Do Manager</title>
</head>
<body>

<div id="container"><div>

<script src="Bagian1.js"></script>
<script src="Bagian2.js"></script>
<script src="Bagian3.js"></script>

<script>

const cnt = getContainer("container");

const inTxa = createTextarea("text-input");
const outTxa = createTextarea("text-output");

// ðŸ”¥ FIX IMPORTANT
inTxa.id = "text-input";
outTxa.id = "text-output";

const btnDiv = createDiv("button-container");

const deBtn = createButton("de-button", "Load Tasks");
const owBtn = createButton("ow-button", "Copy All");
const coBtn = createButton("co-button", "Clear Completed");
const ciBtn = createButton("ci-button", "Clear Tasks");
const ppBtn = createButton("pp-button", "Mark Done");

cnt.append(inTxa);
cnt.append(btnDiv);
cnt.append(outTxa);

btnDiv.append(ciBtn);
btnDiv.append(coBtn);
btnDiv.append(deBtn);
btnDiv.append(owBtn);
btnDiv.append(ppBtn);

changeElementsFlex(
  ["text-input", "3"],
  ["button-container", "3"],
  ["text-output", "3"]
);

consolex.setOutput(outTxa);
consolex.setEOL("");

// Clear input
ciBtn.addEventListener("click", () => {
  clearTextarea("text-input");
});

// Clear output
coBtn.addEventListener("click", () => {
  clearTextarea("text-output");
});

// Default tasks
deBtn.addEventListener("click", () => {
  inTxa.value = "Study JavaScript";
  inTxa.value += "\nFinish assignment";
  inTxa.value += "\nRead lecture notes";
  inTxa.value += "\nExercise";
  inTxa.value += "\nRelax";
});

// Copy all
owBtn.addEventListener("click", () => {
  copyTextareaFromTo("text-input", "text-output");
});

// Move last task
ppBtn.addEventListener("click", () => {
  let inLines = inTxa.value.split("\n");
  let outLines = outTxa.value.split("\n");

  if(inLines.length == 1 && inLines[0] == "") inLines = [];
  if(outLines.length == 1 && outLines[0] == "") outLines = [];

  let item = "";
  if(inLines.length > 0) item = inLines.pop();

  if(item.length > 0) outLines.push("âœ” " + item);

  inTxa.value = inLines.join("\n");
  outTxa.value = outLines.join("\n");

  outTxa.scrollTop = outTxa.scrollHeight;
});

</script>

</body>
</html>
